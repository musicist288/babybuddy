if("undefined"==typeof jQuery)throw new Error("Baby Buddy requires jQuery.");var BabyBuddy={};function preventDoubleSubmit(){return!1}BabyBuddy.PullToRefresh=function(e){return{init:function(){e.init({mainElement:"body",onRefresh:this.onRefresh})},onRefresh:function(){window.location.reload()}}}(PullToRefresh),$("form").off("submit",preventDoubleSubmit),$("form").on("submit",function(){$(this).on("submit",preventDoubleSubmit)}),function(){function e(e){let t=e.toString();return 1==t.length&&(t="0"+t),t}document.addEventListener("DOMContentLoaded",function(t){document.addEventListener("click",function(t){if(event.target.classList.contains("datetime-now")){let n=t.target.parentElement.querySelector('input[type="datetime-local"]'),i=new Date,d=[i.getFullYear().toString(),e(i.getMonth()+1),e(i.getDate())].join("-")+"T"+[e(i.getHours()),e(i.getMinutes()),e(i.getSeconds())].join(":");n.value=d}})})}(),BabyBuddy.Timer=function(e){var t=null,n=null,i=null,d=new Date,o=null,r={run:function(d,u){return n=d,0===(i=e("#"+u)).length?(console.error("BBTimer: Timer element not found."),!1):0===i.find(".timer-seconds").length||0===i.find(".timer-minutes").length||0===i.find(".timer-hours").length?(console.error("BBTimer: Element does not contain expected children."),!1):(t=setInterval(this.tick,1e3),void 0!==document.hidden?o="hidden":void 0!==document.msHidden?o="msHidden":void 0!==document.webkitHidden&&(o="webkitHidden"),void window.addEventListener("focus",r.handleVisibilityChange,!1))},handleVisibilityChange:function(){!document[o]&&new Date-d>1&&r.update()},tick:function(){var e=i.find(".timer-seconds"),t=Number(e.text());if(t<59)e.text(t+1);else{e.text(0);var n=i.find(".timer-minutes"),d=Number(n.text());if(d<59)n.text(d+1);else{n.text(0);var o=i.find(".timer-hours"),r=Number(o.text());o.text(r+1)}}},update:function(){e.get("/api/timers/"+n+"/",function(e){if(e&&"duration"in e){clearInterval(t);var n=e.duration.split(/[\s:.]/);5===n.length&&(n[0]=24*parseInt(n[0])+parseInt(n[1]),n[1]=n[2],n[2]=n[3]),i.find(".timer-hours").text(parseInt(n[0])),i.find(".timer-minutes").text(parseInt(n[1])),i.find(".timer-seconds").text(parseInt(n[2])),d=new Date,t=setInterval(r.tick,1e3)}})}};return r}(jQuery),BabyBuddy.Dashboard=function(e){var t=null,n={watch:function(i,d){if(0==e("#"+i).length)return console.error("Baby Buddy: Dashboard element not found."),!1;void 0!==document.hidden?t="hidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),void 0===window.addEventListener||void 0===document.hidden?d&&setInterval(this.update,d):(window.addEventListener("focus",n.handleVisibilityChange,!1),d&&setInterval(n.handleVisibilityChange,d))},handleVisibilityChange:function(){document[t]||n.update()},update:function(){location.reload()}};return n}(jQuery);